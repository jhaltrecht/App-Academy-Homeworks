#!/usr/bin/env ruby
puts 'Input your email:'
email=gets.chomp
user=User.find_by(email: email)
raise 'invalid user' if !user 
puts 'What do you want to do?'
puts '0: Create shortened URL'
puts '1: Visit shortened URL'
choice=gets.chomp.to_i
if choice==0
     puts 'Type in your longer url'
    long_url = gets.chomp
    shorter_url=ShortenedUrl.create_new_shortened_url(user,long_url)
    puts "the shorter url is #{shorter_url.short_url}"
elsif choice==1
    puts "type in the shorter url"
    short_url=gets.chomp
    shorter_url=ShortenedUrl.find_by(short_url: short_url)
    raise 'no such url found!' if !shorter_url
end
    Visit.record_visit!(user, shorter_url)
    Launchy.open(shorter_url.long_url)

   


